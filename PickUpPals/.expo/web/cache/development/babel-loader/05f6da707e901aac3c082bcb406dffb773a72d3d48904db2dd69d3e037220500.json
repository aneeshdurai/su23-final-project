{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { memo, useEffect, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Background from \"./components/Background\";\nimport Header from \"./components/Header\";\nimport Button from \"./components/Button\";\nimport { theme } from \"./core/theme\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFirestore, collection, query, onSnapshot, orderBy, setDoc, doc } from \"firebase/firestore\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { Card } from \"react-native-paper\";\nimport Logs from \"./components/small_log\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar MyGames = function MyGames(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState({\n      value: \"\",\n      error: \"\"\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    name = _useState2[0],\n    setName = _useState2[1];\n  var _useState3 = useState({\n      value: \"\",\n      error: \"\"\n    }),\n    _useState4 = _slicedToArray(_useState3, 2),\n    location = _useState4[0],\n    setLocation = _useState4[1];\n  var auth = getAuth();\n  var currentUser = auth.currentUser;\n  var db = getFirestore();\n  var gameCollection = collection(db, \"games\");\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    games = _useState6[0],\n    setGames = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    showGames = _useState8[0],\n    setshowGames = _useState8[1];\n  useEffect(function () {\n    var unsubscribe = onSnapshot(query(gameCollection, orderBy(\"creator\")), function (querySnapshot) {\n      var newGames = [];\n      querySnapshot.forEach(function (game) {\n        var newGame = game.data();\n        newGame.id = game.id;\n        newGames.push(newGame);\n      });\n      setGames(newGames);\n    });\n    return unsubscribe;\n  }, []);\n  var leave = function () {\n    var _ref2 = _asyncToGenerator(function* (game) {\n      console.log(game.id);\n      console.log(auth.currentUser);\n      game.members.filter(function (e) {\n        return e = auth.currentUser.uid;\n      });\n      console.log(game.members);\n      yield setDoc(doc(db, \"games\", game.id), game);\n      console.log(game);\n    });\n    return function leave(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var renderGame = function renderGame(_ref3) {\n    var item = _ref3.item;\n    console.log(\"Reached\");\n    if (item.members.includes(auth.currentUser.uid)) {\n      return _jsxs(Card, {\n        style: styles.card,\n        children: [_jsx(Card.Title, {\n          title: `${item.sport} at ${item.location}`,\n          subtitle: `${item.time} on ${item.date}`\n        }), _jsx(Card.Actions, {\n          children: _jsx(Button, {\n            mode: \"contained\",\n            onPress: function onPress() {\n              return leave(item);\n            },\n            style: styles.button,\n            children: \"Leave\"\n          })\n        })]\n      });\n    }\n  };\n  return _jsxs(Background, {\n    children: [_jsx(View, {\n      style: {\n        position: 'absolute',\n        top: 0,\n        left: 0\n      },\n      children: _jsx(Logs, {})\n    }), _jsx(Header, {\n      children: \" My Games \"\n    }), _jsx(FlatList, {\n      data: games,\n      renderItem: renderGame,\n      keyExtractor: function keyExtractor(_, index) {\n        return \"key-\" + index;\n      }\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  label: {\n    color: theme.colors.secondary\n  },\n  button: {\n    marginTop: 24\n  },\n  row: {\n    flexDirection: \"row\",\n    marginTop: 4\n  },\n  link: {\n    fontWeight: \"bold\",\n    color: theme.colors.primary\n  },\n  card: {\n    margin: 32,\n    padding: 16,\n    borderRadius: 12,\n    elevation: 4\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  emptyText: {\n    fontSize: 16,\n    color: theme.colors.secondary\n  }\n});\nexport default memo(MyGames);","map":{"version":3,"names":["React","memo","useEffect","useState","View","StyleSheet","Background","Header","Button","theme","getAuth","getFirestore","collection","query","onSnapshot","orderBy","setDoc","doc","FlatList","Card","Logs","jsx","_jsx","jsxs","_jsxs","MyGames","_ref","navigation","_useState","value","error","_useState2","_slicedToArray","name","setName","_useState3","_useState4","location","setLocation","auth","currentUser","db","gameCollection","_useState5","_useState6","games","setGames","_useState7","_useState8","showGames","setshowGames","unsubscribe","querySnapshot","newGames","forEach","game","newGame","data","id","push","leave","_ref2","_asyncToGenerator","console","log","members","filter","e","uid","_x","apply","arguments","renderGame","_ref3","item","includes","style","styles","card","children","Title","title","sport","subtitle","time","date","Actions","mode","onPress","button","position","top","left","renderItem","keyExtractor","_","index","create","label","color","colors","secondary","marginTop","row","flexDirection","link","fontWeight","primary","margin","padding","borderRadius","elevation","emptyContainer","flex","justifyContent","alignItems","emptyText","fontSize"],"sources":["/Users/aneesh/Desktop/cs160/su23-final-project/PickUpPals/MyGames.tsx"],"sourcesContent":["import React, { memo, useEffect, useState } from \"react\";\nimport { View, Text, StyleSheet, TouchableOpacity } from \"react-native\";\nimport Background from \"./components/Background\";\nimport Logo from \"./components/Logo\";\nimport Header from \"./components/Header\";\nimport Button from \"./components/Button\";\nimport TextInput from \"./components/TextInput\";\nimport BackButton from \"./components/BackButton\";\nimport { theme } from \"./core/theme\";\nimport Toast from \"./components/Toast\";\nimport firebase from \"firebase/app\";\nimport { Game } from \"./game\";\nimport { getAuth, createUserWithEmailAndPassword, updateProfile } from \"firebase/auth\";\nimport { getFirestore, collection, query, onSnapshot, orderBy, setDoc, doc, deleteDoc } from \"firebase/firestore\";\nimport { getDownloadURL, getStorage, ref, uploadBytes } from \"firebase/storage\";\nimport { getApp, initializeApp } from \"firebase/app\";\nimport { FlatList} from \"react-native\";\nimport { Card } from \"react-native-paper\";\nimport Logs from \"./components/small_log\";\n\nconst MyGames = ({navigation}) => {\n\n    const [name, setName] = useState({ value: \"\", error: \"\" });\n    const [location, setLocation] = useState({ value: \"\", error: \"\" });\n    const auth = getAuth();\n    const currentUser = auth.currentUser;\n    const db = getFirestore();\n    const gameCollection = collection(db, \"games\");\n    const [games, setGames] = useState([]);\n    const [showGames, setshowGames] = useState(false);\n    \n    useEffect(() => {\n        const unsubscribe = onSnapshot(query(gameCollection, orderBy(\"creator\")), (querySnapshot) => {\n        var newGames: Game[] = [];\n            querySnapshot.forEach((game) => {\n              const newGame = game.data() as Game;\n              newGame.id = game.id;\n              newGames.push(newGame);\n            });\n            //console.log(newTickets);\n            setGames(newGames);\n        });\n        return unsubscribe;\n    }, []);\n\n    const leave = async (game: Game) => {\n        console.log(game.id);\n        console.log(auth.currentUser);\n        game.members.filter(e => e! = auth.currentUser.uid);\n        console.log(game.members);\n        await setDoc(doc(db, \"games\", game.id), game);\n        \n        console.log(game);\n    }\n\n    const renderGame = ({ item }: { item: Game }) => {\n      console.log(\"Reached\");\n      if (item.members.includes(auth.currentUser.uid)) {\n        return (\n          <Card style={styles.card}>\n            <Card.Title\n              title={`${item.sport} at ${item.location}`}\n              subtitle={`${item.time} on ${item.date}`}\n            />\n            <Card.Actions>\n                <Button\n                    mode=\"contained\"\n                    onPress={() => leave(item)}\n                     style={styles.button}\n                >\n                Leave\n                </Button>\n            </Card.Actions>\n          </Card>\n        );\n      }\n    };\n\n\n    return (\n        <Background>\n            <View style={{ position: 'absolute', top: 0, left: 0 }}>\n            <Logs />\n            </View>\n            <Header> My Games </Header>\n            { (\n            <FlatList\n                data={games}\n                renderItem={renderGame}\n                keyExtractor={(_: any, index: number) => \"key-\" + index}\n                // removed 'position: absolute' and 'bottom: 0'\n            />\n            )}\n        </Background>\n\n    )\n}\n\nconst styles = StyleSheet.create({\n    label: {\n      color: theme.colors.secondary\n    },\n    button: {\n      marginTop: 24\n    },\n    row: {\n      flexDirection: \"row\",\n      marginTop: 4\n    },\n    link: {\n      fontWeight: \"bold\",\n      color: theme.colors.primary\n    },card: {\n      margin: 32,\n      padding: 16,\n      borderRadius: 12,\n      elevation: 4\n    },\n    emptyContainer: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    emptyText: {\n      fontSize: 16,\n      color: theme.colors.secondary\n    }\n  });\n\nexport default memo(MyGames);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}